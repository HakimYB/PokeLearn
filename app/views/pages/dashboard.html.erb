<%= render "shared/navbar" %>
<div class="big-container dashboard-bkg">
  <div class="row w-100">
    <div class="col-6">
      <div class="big-card-left">
      <div class="d-flex justify-content-between align-items-center">
        </div>
          <div class="search-bar">
          <h2 class="text-center">Pokédex</h2>
          <%= form_with url: dashboard_path, method: :get, class: "d-flex justify-content-center nes-field is-inlinev dashboard-search-bar" do %>
            <%= text_field_tag :query,
                params[:query],
                class: "nes-input search-bar-map",
                placeholder: "Search a pokémon"
            %>
            <%= submit_tag "Search", class: "button btn-yellow nes-btn is-warning" %>
          <% end %>
        </div>
        <div class="dex-row">
          <div class="dex-cards dashboard-scrolling-container">
            <% @user_pokemons.each do |user_pokemon| %>
              <div class="dex-card <%=user_pokemon.pokemon.types.first %>">
                <div class="dex-card-img-container">
                  <img src="<%= user_pokemon.pokemon.image_url %>" alt="<%= user_pokemon.pokemon.name %> image">
                </div>
                <div class="dex-card-info-container">
                  <div class="dex-card-title">
                    <h3><%= user_pokemon.pokemon.name.capitalize %></h3>
                    <div class="dex-card-types">
                    <% user_pokemon.pokemon.types.each do |type| %>
                      <div class="tag <%=type %>">
                        <%= type.capitalize %>
                      </div>
                    <% end %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-6" data-controller="big-card">
      <div class="big-card" >
        <div class="dashboard-row d-flex justify-content-between align-items-center">
          <div class="badge-exp d-flex justify-content-between align-items-center">
            <h2> You have <%= @user_pokemons.length %> pokemons </h2>
            <div class="exp"><h2>Exp: <%= current_user.point %></h2></div>
            <%= link_to "PLAY", new_quiz_path, class: "button btn-yellow nes-btn is-warning" %>
          </div>
        </div>
        <div class="big-card-screen">
          <div class="big-card-screen-inner dex-card-pokemon <%=@user_pokemons.first.pokemon.types.first%>">
            <img src="<%= @user_pokemons.first.pokemon.image_url %>" alt="<%= @user_pokemons.first.pokemon.name %> image" class="pokemon-image">
            <h1 class="pokemon-name"><%= @user_pokemons.first.pokemon.name.capitalize  %></h1>
            <div class="dex-card-types">
              <% @user_pokemons.first.pokemon.types.each do |type| %>
                <div class="tag <%=type %>">
                  <%= type.capitalize %>
                </div>
              <% end %>
          </div>
        </div>
      </div>
      <div class="big-card-info">
        <div class="big-card-info-item">Ability:
          <% @pokemon["abilities"].each do |ability| %>
          <p><%= ability["ability"]["name"] %></p>
          <% end %>
        </div>
        <div class="big-card-info-item">
          <div class="big-card-info-item">Description: <%= @description["flavor_text_entries"][0]["flavor_text"] %></div>
          <div class="big-card-info-item">Height: <%= @pokemon["height"] %></div>
          <div class="big-card-info-item">Weight: <%= @pokemon["weight"] %></div>
          <div class="big-card-info-item">Species: <%= @pokemon["species"]["name"] %></div>
          <% if @current_pokemon.evolves_to.nil? %>
            <p>This Pokémon does not evolve.</p>
          <% else %>
            <p><%= @current_pokemon.evolves_to %></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
